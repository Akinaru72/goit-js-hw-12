{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport function fetchImages(query, page, apiKey) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const params = {\n    key: apiKey,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n\n  const queryString = new URLSearchParams(params).toString();\n  const url = `${BASE_URL}?${queryString}`;\n\n  return axios.get(url);\n}\n","export function renderGallery(images) {\n  return images\n    .map(\n      img => `\n      <a href=\"${img.largeImageURL}\" class=\"gallery-link\">\n        <img src=\"${img.webformatURL}\" alt=\"${img.tags}\" loading=\"lazy\" />\n        <ul class=\"image-info\">\n          <li>Likes <span>${img.likes}</span></li>\n          <li>Views <span>${img.views}</span></li>\n          <li>Comments <span>${img.comments}</span></li>\n          <li>Downloads <span>${img.downloads}</span></li>\n        </ul>\n      </a>`\n    )\n    .join('');\n}\n","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst form = document.querySelector('#search-form');\nconst loader = document.querySelector('#loader');\nconst galleryContainer = document.querySelector('#gallery');\nconst loadBtn = document.querySelector('.js-load-btn');\nconst API_KEY = '48131456-02178b54d24f02562d64ec2d5';\n\nconst lightbox = new SimpleLightbox('.gallery-link', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nlet page = 1;\nlet query = '';\n\nconst toggleLoadBtn = isVisible => {\n  loadBtn.classList.toggle('hidden', !isVisible);\n};\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  galleryContainer.innerHTML = '';\n\n  query = event.currentTarget.elements.searchQuery.value.trim();\n  if (!query) {\n    iziToast.warning({\n      message: 'Please enter a search query!',\n      position: 'topRight',\n      timeout: 3000,\n    });\n    form.reset();\n    return;\n  }\n\n  loader.classList.remove('hidden');\n  try {\n    page = 1;\n    toggleLoadBtn(false);\n\n    const { data } = await fetchImages(query, page, API_KEY);\n\n    if (data.hits.length === 0) {\n      iziToast.info({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        timeout: 3000,\n      });\n      form.reset();\n      return;\n    }\n\n    if (data.totalHits > 15) {\n      toggleLoadBtn(true);\n    }\n\n    const galleryMarkup = renderGallery(data.hits);\n    galleryContainer.innerHTML = galleryMarkup;\n    lightbox.refresh();\n  } catch (err) {\n    iziToast.error({\n      message: `An error occurred: ${err.message}`,\n      position: 'topRight',\n      timeout: 3000,\n    });\n  } finally {\n    loader.classList.add('hidden');\n  }\n});\n\nconst loadBtnClick = async () => {\n  try {\n    page++;\n    const { data } = await fetchImages(query, page, API_KEY);\n\n    const galleryMarkup = renderGallery(data.hits);\n    galleryContainer.insertAdjacentHTML('beforeend', galleryMarkup);\n    lightbox.refresh();\n\n    if (data.hits.length < 15 || page * 15 >= data.totalHits) {\n      toggleLoadBtn(false);\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        timeout: 3000,\n      });\n    } else {\n      window.scrollBy({\n        top:\n          document\n            .querySelector('.gallery')\n            .firstElementChild.getBoundingClientRect().height * 2,\n        behavior: 'smooth',\n      });\n    }\n  } catch (err) {\n    iziToast.error({\n      message: `An error occurred while loading images: ${err.message}`,\n      position: 'topRight',\n      timeout: 3000,\n    });\n  }\n};\n\nloadBtn.addEventListener('click', loadBtnClick);\n"],"names":["fetchImages","query","page","apiKey","BASE_URL","params","queryString","url","axios","renderGallery","images","img","form","loader","galleryContainer","loadBtn","API_KEY","lightbox","SimpleLightbox","toggleLoadBtn","isVisible","event","iziToast","data","galleryMarkup","err","loadBtnClick"],"mappings":"owBAEO,SAASA,EAAYC,EAAOC,EAAMC,EAAQ,CAC/C,MAAMC,EAAW,2BACXC,EAAS,CACb,IAAKF,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACJ,EAEQI,EAAc,IAAI,gBAAgBD,CAAM,EAAE,SAAQ,EAClDE,EAAM,GAAGH,CAAQ,IAAIE,CAAW,GAEtC,OAAOE,EAAM,IAAID,CAAG,CACtB,CClBO,SAASE,EAAcC,EAAQ,CACpC,OAAOA,EACJ,IACCC,GAAO;AAAA,iBACIA,EAAI,aAAa;AAAA,oBACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,4BAE1BA,EAAI,KAAK;AAAA,4BACTA,EAAI,KAAK;AAAA,+BACNA,EAAI,QAAQ;AAAA,gCACXA,EAAI,SAAS;AAAA;AAAA,WAGxC,EACA,KAAK,EAAE,CACZ,CCRA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAmB,SAAS,cAAc,UAAU,EACpDC,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAU,qCAEVC,EAAW,IAAIC,EAAe,gBAAiB,CACnD,aAAc,MACd,aAAc,GAChB,CAAC,EAED,IAAIhB,EAAO,EACPD,EAAQ,GAEZ,MAAMkB,EAAgBC,GAAa,CACjCL,EAAQ,UAAU,OAAO,SAAU,CAACK,CAAS,CAC/C,EAEAR,EAAK,iBAAiB,SAAU,MAAMS,GAAS,CAK7C,GAJAA,EAAM,eAAc,EACpBP,EAAiB,UAAY,GAE7Bb,EAAQoB,EAAM,cAAc,SAAS,YAAY,MAAM,OACnD,CAACpB,EAAO,CACVqB,EAAS,QAAQ,CACf,QAAS,+BACT,SAAU,WACV,QAAS,GACf,CAAK,EACDV,EAAK,MAAK,EACV,MACD,CAEDC,EAAO,UAAU,OAAO,QAAQ,EAChC,GAAI,CACFX,EAAO,EACPiB,EAAc,EAAK,EAEnB,KAAM,CAAE,KAAAI,CAAI,EAAK,MAAMvB,EAAYC,EAAOC,EAAMc,CAAO,EAEvD,GAAIO,EAAK,KAAK,SAAW,EAAG,CAC1BD,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,WACV,QAAS,GACjB,CAAO,EACDV,EAAK,MAAK,EACV,MACD,CAEGW,EAAK,UAAY,IACnBJ,EAAc,EAAI,EAGpB,MAAMK,EAAgBf,EAAcc,EAAK,IAAI,EAC7CT,EAAiB,UAAYU,EAC7BP,EAAS,QAAO,CACjB,OAAQQ,EAAK,CACZH,EAAS,MAAM,CACb,QAAS,sBAAsBG,EAAI,OAAO,GAC1C,SAAU,WACV,QAAS,GACf,CAAK,CACL,QAAY,CACRZ,EAAO,UAAU,IAAI,QAAQ,CAC9B,CACH,CAAC,EAED,MAAMa,EAAe,SAAY,CAC/B,GAAI,CACFxB,IACA,KAAM,CAAE,KAAAqB,CAAI,EAAK,MAAMvB,EAAYC,EAAOC,EAAMc,CAAO,EAEjDQ,EAAgBf,EAAcc,EAAK,IAAI,EAC7CT,EAAiB,mBAAmB,YAAaU,CAAa,EAC9DP,EAAS,QAAO,EAEZM,EAAK,KAAK,OAAS,IAAMrB,EAAO,IAAMqB,EAAK,WAC7CJ,EAAc,EAAK,EACnBG,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,WACV,QAAS,GACjB,CAAO,GAED,OAAO,SAAS,CACd,IACE,SACG,cAAc,UAAU,EACxB,kBAAkB,wBAAwB,OAAS,EACxD,SAAU,QAClB,CAAO,CAEJ,OAAQG,EAAK,CACZH,EAAS,MAAM,CACb,QAAS,2CAA2CG,EAAI,OAAO,GAC/D,SAAU,WACV,QAAS,GACf,CAAK,CACF,CACH,EAEAV,EAAQ,iBAAiB,QAASW,CAAY"}