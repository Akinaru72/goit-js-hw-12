{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryListEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMorebtnEl = document.querySelector('.load-more');\n\nconst gallerySLB = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nexport const createGallery = images => {\n  const galleryHTML = images\n    .map(\n      image =>\n        `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n              <img\n                class=\"gallery-image\"\n                src=\"${image.webformatURL}\"\n                alt=\"${image.tags}\"\n              />\n              <ul class=\"gallery-atributes\">\n                <li>Likes <span class=\"gallery-values\">${image.likes}</span></li>\n                <li>Views <span class=\"gallery-values\">${image.views}</span></li>\n                <li>Comments <span class=\"gallery-values\">${image.comments}</span></li>\n                <li>Downloads <span class=\"gallery-values\">${image.downloads}</span></li>\n              </ul>\n            </a>\n        </li>\n      `\n    )\n    .join(' ');\n\n  galleryListEl.insertAdjacentHTML('beforeend', galleryHTML);\n  gallerySLB.refresh();\n};\n\nexport const clearGallery = () => {\n  galleryListEl.innerHTML = '';\n};\n\nexport const showLoader = () => {\n  loaderEl.classList.remove('hidden');\n};\n\nexport const hideLoader = () => {\n  loaderEl.classList.add('hidden');\n};\n\nexport const showLoadMoreButton = () => {\n  loadMorebtnEl.classList.remove('hidden');\n};\n\nexport const hideLoadMoreButton = () => {\n  loadMorebtnEl.classList.add('hidden');\n};\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '48131456-02178b54d24f02562d64ec2d5';\n\nexport const getImagesByQuery = (query, page) => {\n  return axios.get(BASE_URL, {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n      page,\n    },\n  });\n};\n","import {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nimport { getImagesByQuery } from './js/pixabay-api';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst searchFormEl = document.querySelector('.form');\nconst loadMorebtnEl = document.querySelector('.load-more');\n\nconst showErrorToast = message => {\n  iziToast.error({\n    backgroundColor: '#ef4040',\n    message,\n    position: 'topRight',\n    close: true,\n    timeout: 2000,\n  });\n};\n\nlet page = 1;\nlet searchedQuery = '';\nconst PER_PAGE = 15;\n\nconst onSearchFormSubmit = async event => {\n  try {\n    event.preventDefault();\n\n    searchedQuery = event.currentTarget.elements['search-text'].value.trim();\n\n    if (!searchedQuery) {\n      showErrorToast('Field is empty, input again');\n      return;\n    }\n\n    clearGallery();\n    page = 1;\n    hideLoadMoreButton();\n\n    showLoader();\n    const { data } = await getImagesByQuery(searchedQuery, page);\n\n    if (data.hits.length === 0) {\n      showErrorToast(\n        'Sorry, there are no images matching <br>your search query. Please try again!'\n      );\n      clearGallery();\n      searchFormEl.reset();\n      return;\n    }\n\n    createGallery(data.hits);\n    if (data.totalHits > PER_PAGE) {\n      showLoadMoreButton();\n    }\n\n    searchFormEl.reset();\n  } catch (err) {\n    console.log(err);\n  } finally {\n    hideLoader();\n  }\n};\n\nconst onClickLoadMoreBtn = async () => {\n  try {\n    page += 1;\n    hideLoadMoreButton();\n    showLoader();\n\n    const { data } = await getImagesByQuery(searchedQuery, page);\n\n    createGallery(data.hits);\n\n    if (page * PER_PAGE >= data.totalHits) {\n      hideLoadMoreButton();\n      showErrorToast(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    } else {\n      showLoadMoreButton();\n    }\n\n    const gallery = document.querySelector('.gallery');\n    const { height } = gallery.firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: height * 2,\n      behavior: 'smooth',\n    });\n  } catch (err) {\n    console.log(err);\n  } finally {\n    hideLoader();\n  }\n};\n\nsearchFormEl.addEventListener('submit', onSearchFormSubmit);\nloadMorebtnEl.addEventListener('click', onClickLoadMoreBtn);\n"],"names":["galleryListEl","loaderEl","loadMorebtnEl","gallerySLB","SimpleLightbox","createGallery","images","galleryHTML","image","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","BASE_URL","API_KEY","getImagesByQuery","query","page","axios","searchFormEl","showErrorToast","message","iziToast","searchedQuery","PER_PAGE","onSearchFormSubmit","event","data","err","onClickLoadMoreBtn","gallery","height"],"mappings":"owBAGA,MAAMA,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAW,SAAS,cAAc,SAAS,EAC3CC,EAAgB,SAAS,cAAc,YAAY,EAEnDC,EAAa,IAAIC,EAAe,aAAc,CAClD,aAAc,IACd,aAAc,KAChB,CAAC,EAEYC,EAAgBC,GAAU,CACrC,MAAMC,EAAcD,EACjB,IACCE,GACE;AAAA;AAAA,4CAEoCA,EAAM,aAAa;AAAA;AAAA;AAAA,uBAGxCA,EAAM,YAAY;AAAA,uBAClBA,EAAM,IAAI;AAAA;AAAA;AAAA,yDAGwBA,EAAM,KAAK;AAAA,yDACXA,EAAM,KAAK;AAAA,4DACRA,EAAM,QAAQ;AAAA,6DACbA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,OAKvE,EACA,KAAK,GAAG,EAEXR,EAAc,mBAAmB,YAAaO,CAAW,EACzDJ,EAAW,QAAO,CACpB,EAEaM,EAAe,IAAM,CAChCT,EAAc,UAAY,EAC5B,EAEaU,EAAa,IAAM,CAC9BT,EAAS,UAAU,OAAO,QAAQ,CACpC,EAEaU,EAAa,IAAM,CAC9BV,EAAS,UAAU,IAAI,QAAQ,CACjC,EAEaW,EAAqB,IAAM,CACtCV,EAAc,UAAU,OAAO,QAAQ,CACzC,EAEaW,EAAqB,IAAM,CACtCX,EAAc,UAAU,IAAI,QAAQ,CACtC,ECxDMY,EAAW,2BACXC,EAAU,qCAEHC,EAAmB,CAACC,EAAOC,IAC/BC,EAAM,IAAIL,EAAU,CACzB,OAAQ,CACN,IAAKC,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACD,CACL,CAAG,ECFGE,EAAe,SAAS,cAAc,OAAO,EAC7ClB,EAAgB,SAAS,cAAc,YAAY,EAEnDmB,EAAiBC,GAAW,CAChCC,EAAS,MAAM,CACb,gBAAiB,UACjB,QAAAD,EACA,SAAU,WACV,MAAO,GACP,QAAS,GACb,CAAG,CACH,EAEA,IAAIJ,EAAO,EACPM,EAAgB,GACpB,MAAMC,EAAW,GAEXC,EAAqB,MAAMC,GAAS,CACxC,GAAI,CAKF,GAJAA,EAAM,eAAc,EAEpBH,EAAgBG,EAAM,cAAc,SAAS,aAAa,EAAE,MAAM,OAE9D,CAACH,EAAe,CAClBH,EAAe,6BAA6B,EAC5C,MACD,CAEDZ,IACAS,EAAO,EACPL,IAEAH,IACA,KAAM,CAAE,KAAAkB,CAAI,EAAK,MAAMZ,EAAiBQ,EAAeN,CAAI,EAE3D,GAAIU,EAAK,KAAK,SAAW,EAAG,CAC1BP,EACE,8EACR,EACMZ,IACAW,EAAa,MAAK,EAClB,MACD,CAEDf,EAAcuB,EAAK,IAAI,EACnBA,EAAK,UAAYH,GACnBb,IAGFQ,EAAa,MAAK,CACnB,OAAQS,EAAK,CACZ,QAAQ,IAAIA,CAAG,CACnB,QAAY,CACRlB,GACD,CACH,EAEMmB,EAAqB,SAAY,CACrC,GAAI,CACFZ,GAAQ,EACRL,IACAH,IAEA,KAAM,CAAE,KAAAkB,CAAI,EAAK,MAAMZ,EAAiBQ,EAAeN,CAAI,EAE3Db,EAAcuB,EAAK,IAAI,EAEnBV,EAAOO,GAAYG,EAAK,WAC1Bf,IACAQ,EACE,4DACR,GAEMT,IAGF,MAAMmB,EAAU,SAAS,cAAc,UAAU,EAC3C,CAAE,OAAAC,CAAQ,EAAGD,EAAQ,kBAAkB,sBAAqB,EAElE,OAAO,SAAS,CACd,IAAKC,EAAS,EACd,SAAU,QAChB,CAAK,CACF,OAAQH,EAAK,CACZ,QAAQ,IAAIA,CAAG,CACnB,QAAY,CACRlB,GACD,CACH,EAEAS,EAAa,iBAAiB,SAAUM,CAAkB,EAC1DxB,EAAc,iBAAiB,QAAS4B,CAAkB"}